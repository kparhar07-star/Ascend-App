import { useState } from "react";
import styles from './AscensionItem.module.css';

export default function AscensionItem({ data, onDelete, onToggle }) {
    const [isExpanded, setIsExpanded] = useState(false);

    if (!data) return null;

    const toggleComplete = (e) => {
        e.stopPropagation();
        if (onToggle) {
            onToggle();
        }
    };

    const handleDelete = (e) => {
        e.stopPropagation(); // Prevent collapsing/expanding when clicking delete
        if (onDelete) {
            onDelete();
        }
    };

    return (
        <div className={`${styles.ascensionItemContainer} ${isExpanded ? styles.expanded : ''}`}>
            <div className={styles.header} onClick={() => setIsExpanded(!isExpanded)}>
                <div className="flex items-center gap-3">
                    <div 
                        className={`${styles.checkbox} ${data.is_completed ? styles.checked : ''}`}
                        onClick={toggleComplete}
                    >
                        {data.is_completed && (
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 3L4.5 8.5L2 6" stroke="black" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                            </svg>
                        )}
                    </div>
                    <h3 className={`${styles.title} ${data.is_completed ? 'line-through text-gray-500' : ''}`}>
                        {data.title}
                    </h3>
                </div>
                <div className={`transition-transform duration-300 ${isExpanded ? 'rotate-180' : ''}`}>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 9L12 15L18 9" stroke="#00D0FF" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                    </svg>
                </div>
            </div>
            
            <div className={`${styles.details} ${isExpanded ? styles.showDetails : ''}`}>
                <div className="w-full flex items-center justify-between text-sm text-gray-400 mt-2 px-2 pb-2">
                    <div className="flex gap-3">
                    <span className={styles.currencyContainer}>
                        <svg width="30" height="30" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M11.8666 8.74219C12.2817 8.09108 12.5015 7.33466 12.5 6.5625C12.5 4.31875 10.6813 2.5 8.43753 2.5C7.63534 2.5 6.88753 2.7325 6.25784 3.13344C5.8388 3.15708 5.42403 3.2303 5.02222 3.35156C5.32742 3.02668 5.6774 2.74698 6.06159 2.52094C6.77688 2.09946 7.59168 1.87647 8.4219 1.875H8.43753C11.0263 1.875 13.125 3.97375 13.125 6.5625C13.125 6.60458 13.1245 6.64656 13.1235 6.68844L13.1228 6.70344C13.1008 7.4909 12.8793 8.25989 12.4791 8.93844C12.253 9.32263 11.9734 9.67261 11.6485 9.97781C11.7675 9.58313 11.8425 9.16937 11.8666 8.74219Z" fill="#FFB411"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.05375 7.08344C7.96759 6.83967 7.80796 6.62862 7.59685 6.47935C7.38574 6.33009 7.13355 6.24996 6.875 6.25V5.9375H6.25V6.25C5.91848 6.25 5.60054 6.3817 5.36612 6.61612C5.1317 6.85054 5 7.16848 5 7.5C5 7.83152 5.1317 8.14946 5.36612 8.38388C5.60054 8.6183 5.91848 8.75 6.25 8.75V10C5.97812 10 5.74656 9.82656 5.66031 9.58344C5.64752 9.54366 5.62687 9.50685 5.5996 9.4752C5.57233 9.44354 5.53899 9.41767 5.50155 9.39912C5.46411 9.38057 5.42333 9.36972 5.38162 9.36721C5.33991 9.36469 5.29812 9.37057 5.25872 9.38449C5.21933 9.39841 5.18312 9.42009 5.15225 9.44825C5.12137 9.4764 5.09646 9.51047 5.07898 9.54842C5.0615 9.58637 5.05181 9.62744 5.05049 9.66921C5.04916 9.71097 5.05622 9.75258 5.07125 9.79156C5.15741 10.0353 5.31704 10.2464 5.52815 10.3956C5.73926 10.5449 5.99145 10.625 6.25 10.625V10.9375H6.875V10.625C7.20652 10.625 7.52446 10.4933 7.75888 10.2589C7.9933 10.0245 8.125 9.70652 8.125 9.375C8.125 9.04348 7.9933 8.72554 7.75888 8.49112C7.52446 8.2567 7.20652 8.125 6.875 8.125V6.875C7.14687 6.875 7.37844 7.04844 7.46469 7.29156C7.47748 7.33134 7.49813 7.36815 7.5254 7.3998C7.55267 7.43146 7.58601 7.45733 7.62345 7.47588C7.66089 7.49443 7.70167 7.50528 7.74338 7.50779C7.78509 7.51031 7.82688 7.50443 7.86628 7.49051C7.90567 7.47659 7.94188 7.45491 7.97275 7.42675C8.00363 7.3986 8.02854 7.36453 8.04602 7.32658C8.0635 7.28863 8.07319 7.24756 8.07451 7.20579C8.07584 7.16403 8.06878 7.12242 8.05375 7.08344ZM6.25 6.875C6.08424 6.875 5.92527 6.94085 5.80806 7.05806C5.69085 7.17527 5.625 7.33424 5.625 7.5C5.625 7.66576 5.69085 7.82473 5.80806 7.94194C5.92527 8.05915 6.08424 8.125 6.25 8.125V6.875ZM6.875 10C7.04076 10 7.19973 9.93415 7.31694 9.81694C7.43415 9.69973 7.5 9.54076 7.5 9.375C7.5 9.20924 7.43415 9.05027 7.31694 8.93306C7.19973 8.81585 7.04076 8.75 6.875 8.75V10Z" fill="#FFB411"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.25 8.4375C11.25 11.0262 9.15125 13.125 6.5625 13.125C3.97375 13.125 1.875 11.0262 1.875 8.4375C1.875 5.84875 3.97375 3.75 6.5625 3.75C9.15125 3.75 11.25 5.84875 11.25 8.4375ZM10.625 8.4375C10.625 10.6813 8.80625 12.5 6.5625 12.5C4.31875 12.5 2.5 10.6813 2.5 8.4375C2.5 6.19375 4.31875 4.375 6.5625 4.375C8.80625 4.375 10.625 6.19375 10.625 8.4375Z" fill="#FFB411"/>
                        </svg>
                        {data.coins} Coins
                    </span>
                    <span className={styles.currencyContainer}>
                        <svg width="30" height="30" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3.2281 2.7875C3.34695 2.5595 3.52602 2.36845 3.74585 2.23512C3.96569 2.10179 4.21787 2.03128 4.47498 2.03125H10.5256C10.7827 2.03128 11.0349 2.10179 11.2547 2.23512C11.4746 2.36845 11.6536 2.5595 11.7725 2.7875L13.0919 5.31563C13.2216 5.5642 13.2742 5.84591 13.2426 6.12456C13.2111 6.40321 13.097 6.66607 12.915 6.87937L7.85685 12.8044C7.81285 12.8558 7.75822 12.8971 7.69672 12.9255C7.63522 12.9538 7.56831 12.9685 7.5006 12.9685C7.4329 12.9685 7.36599 12.9538 7.30449 12.9255C7.24299 12.8971 7.18836 12.8558 7.14435 12.8044L2.08623 6.87937C1.90409 6.66613 1.78987 6.40331 1.75824 6.12466C1.72661 5.84601 1.77902 5.56426 1.90873 5.31563L3.2281 2.7875ZM4.3406 2.98813L5.6456 5.16125L6.96248 2.96875H4.47498C4.42952 2.96907 4.38431 2.97559 4.3406 2.98813ZM6.47435 5.60188H8.52623L7.49998 3.89375L6.47435 5.60188ZM9.7056 6.53938L8.49498 10.6131L11.9725 6.53938H9.7056ZM6.5056 10.6131L5.2956 6.53938H3.0281L6.5056 10.6131ZM6.2731 6.53938L7.5006 10.6687L8.72748 6.53938H6.2731ZM11.2544 3.82062L10.1844 5.60188H12.1837L11.2544 3.82062ZM10.525 2.96875H8.03748L9.35435 5.16125L10.66 2.98813C10.6161 2.97553 10.5707 2.96901 10.525 2.96875ZM4.81623 5.60188L3.74623 3.82062L2.81685 5.60188H4.81623Z" fill="#00D0FF"/>
                        </svg>
                        {data.diamonds} Diamonds
                    </span>
                    <span className={styles.currencyContainer}>
                        <svg width="30" height="30" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.0312 1.71875H2.96875C2.27839 1.71875 1.71875 2.27839 1.71875 2.96875V12.0312C1.71875 12.7216 2.27839 13.2812 2.96875 13.2812H12.0312C12.7216 13.2812 13.2812 12.7216 13.2812 12.0312V2.96875C13.2812 2.27839 12.7216 1.71875 12.0312 1.71875Z" stroke="#F5F5F3" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10.2344 6.09375C9.88213 6.09375 9.54432 5.95382 9.29525 5.70475C9.04618 5.45568 8.90625 5.11787 8.90625 4.76562C8.90625 4.41338 8.76632 4.07557 8.51725 3.8265C8.26818 3.57743 7.93037 3.4375 7.57812 3.4375H7.42188C7.06963 3.4375 6.73182 3.57743 6.48275 3.8265C6.23368 4.07557 6.09375 4.41338 6.09375 4.76562C6.09375 5.11787 5.95382 5.45568 5.70475 5.70475C5.45568 5.95382 5.11787 6.09375 4.76562 6.09375C4.41338 6.09375 4.07557 6.23368 3.8265 6.48275C3.57743 6.73182 3.4375 7.06963 3.4375 7.42188V7.57812C3.4375 7.93037 3.57743 8.26818 3.8265 8.51725C4.07557 8.76632 4.41338 8.90625 4.76562 8.90625C5.11787 8.90625 5.45568 9.04618 5.70475 9.29525C5.95382 9.54432 6.09375 9.88213 6.09375 10.2344C6.09375 10.5866 6.23368 10.9244 6.48275 11.1735C6.73182 11.4226 7.06963 11.5625 7.42188 11.5625H7.57812C7.93037 11.5625 8.26818 11.4226 8.51725 11.1735C8.76632 10.9244 8.90625 10.5866 8.90625 10.2344C8.90625 9.88213 9.04618 9.54432 9.29525 9.29525C9.54432 9.04618 9.88213 8.90625 10.2344 8.90625C10.5866 8.90625 10.9244 8.76632 11.1735 8.51725C11.4226 8.26818 11.5625 7.93037 11.5625 7.57812V7.42188C11.5625 7.06963 11.4226 6.73182 11.1735 6.48275C10.9244 6.23368 10.5866 6.09375 10.2344 6.09375Z" stroke="#F5F5F3" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10.4282 8.43916C10.1792 8.19009 10.0393 7.85231 10.0393 7.5001C10.0393 7.14789 10.1792 6.8101 10.4282 6.56103C10.6773 6.31197 10.8172 5.97418 10.8172 5.62197C10.8172 5.26976 10.6773 4.93198 10.4282 4.68291L10.3176 4.57228C10.0685 4.32325 9.73074 4.18335 9.37853 4.18335C9.02633 4.18335 8.68854 4.32325 8.43947 4.57228C8.31614 4.69564 8.16972 4.79349 8.00857 4.86025C7.84741 4.92701 7.67469 4.96138 7.50025 4.96138C7.32582 4.96138 7.15309 4.92701 6.99194 4.86025C6.83079 4.79349 6.68437 4.69564 6.56103 4.57228C6.31197 4.32325 5.97418 4.18335 5.62197 4.18335C5.26976 4.18335 4.93198 4.32325 4.68291 4.57228L4.57228 4.6826C4.32325 4.93166 4.18335 5.26945 4.18335 5.62166C4.18335 5.97387 4.32325 6.31166 4.57228 6.56072C4.69564 6.68405 4.79349 6.83048 4.86025 6.99163C4.92701 7.15278 4.96138 7.32551 4.96138 7.49994C4.96138 7.67437 4.92701 7.8471 4.86025 8.00825C4.79349 8.16941 4.69564 8.31583 4.57228 8.43916C4.32325 8.68823 4.18335 9.02601 4.18335 9.37822C4.18335 9.73043 4.32325 10.0682 4.57228 10.3173L4.6826 10.4279C4.93166 10.6769 5.26945 10.8168 5.62166 10.8168C5.97387 10.8168 6.31166 10.6769 6.56072 10.4279C6.68405 10.3046 6.83048 10.2067 6.99163 10.1399C7.15278 10.0732 7.32551 10.0388 7.49994 10.0388C7.67437 10.0388 7.8471 10.0732 8.00825 10.1399C8.16941 10.2067 8.31583 10.3046 8.43916 10.4279C8.68823 10.6769 9.02601 10.8168 9.37822 10.8168C9.73043 10.8168 10.0682 10.6769 10.3173 10.4279L10.4279 10.3176C10.6769 10.0685 10.8168 9.73074 10.8168 9.37853C10.8168 9.02633 10.6769 8.68854 10.4279 8.43947" stroke="#F5F5F3" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        {data.exp} XP
                    </span>
                    </div>
                    <div onClick={handleDelete} className="cursor-pointer hover:opacity-80 transition-opacity">
                        <svg width="30" height="30" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.3332 7.5V15.8333H6.6665V7.5H13.3332ZM12.0832 2.5H7.9165L7.08317 3.33333H4.1665V5H15.8332V3.33333H12.9165L12.0832 2.5ZM14.9998 5.83333H4.99984V15.8333C4.99984 16.75 5.74984 17.5 6.6665 17.5H13.3332C14.2498 17.5 14.9998 16.75 14.9998 15.8333V5.83333Z" fill="#DC143C"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    );
}
